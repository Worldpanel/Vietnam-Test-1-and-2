<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worldpanel Vietnam - Online Assessment</title>
    <style>
        :root { --primary: #673ab7; --bg: #f0ebf8; --text: #202124; --warning: #d93025; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 20px; user-select: none; }
        .container { max-width: 800px; margin: 0 auto; }
        
        /* UI Elements */
        .header-card { background: white; border-top: 10px solid var(--primary); border-radius: 8px; padding: 30px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.12); }
        .timer-box { position: fixed; top: 20px; right: 20px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); border-left: 5px solid var(--primary); z-index: 1000; text-align: center; }
        #timer { font-size: 26px; font-weight: bold; color: var(--primary); }
        #alert-popup { display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: var(--warning); color: white; padding: 12px 25px; border-radius: 5px; z-index: 2000; font-weight: bold; }

        /* Question Styling */
        .section-header { background: #e8e0f5; padding: 15px 20px; border-radius: 4px; font-weight: bold; margin: 40px 0 20px 0; color: #4a148c; text-transform: uppercase; }
        .question-card { background: white; padding: 25px; border-radius: 8px; margin-bottom: 15px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .question-text { font-size: 16px; font-weight: 600; margin-bottom: 15px; display: block; line-height: 1.5; }
        .options-list { display: flex; flex-direction: column; gap: 12px; }
        label { cursor: pointer; padding: 10px; border-radius: 4px; border: 1px solid transparent; transition: 0.2s; display: flex; align-items: center; }
        label:hover { background: #f3e5f5; border-color: var(--primary); }
        input[type="radio"] { margin-right: 15px; transform: scale(1.2); }
        
        /* Data Tables */
        table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 14px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }

        .btn-submit { background: var(--primary); color: white; border: none; padding: 18px; border-radius: 4px; cursor: pointer; font-size: 18px; font-weight: bold; width: 100%; margin-top: 30px; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="alert-popup">Security Protocol: Action Blocked!</div>

    <div class="timer-box">
        <div style="font-size: 11px; color: #666;">TIME REMAINING</div>
        <div id="timer">45:00</div>
    </div>

    <div class="container">
        <div class="header-card">
            <h1>Assessment Center</h1>
            <p><strong>Total Duration:</strong> 45 Minutes</p>
            <p style="font-size: 14px; color: #555;">Please provide your details and answer the questions below. Your tab activity and full-screen status are monitored.</p>
        </div>

        <form id="testForm">
            <div class="question-card">
                <label class="question-text">Candidate Full Name *</label>
                <input type="text" name="candidate_name" required style="width:100%; border:none; border-bottom:2px solid #ddd; padding:10px 0; outline:none; font-size:16px;">
            </div>

            <div class="section-header">Test 1: Numerical Aptitude</div>
            
            <div class="question-card">
                <span class="question-text">1. Which of the following fractions is less than one-third? </span>
                <div class="options-list">
                    <label><input type="radio" name="q1_1" value="A"> A. 22/63</label>
                    <label><input type="radio" name="q1_1" value="B"> B. 4/11</label>
                    <label><input type="radio" name="q1_1" value="C"> C. 15/46</label>
                    <label><input type="radio" name="q1_1" value="D"> D. 33/98</label>
                    <label><input type="radio" name="q1_1" value="E"> E. 102/103</label>
                </div>
            </div>

            <div class="question-card">
                <span class="question-text">2. When it is noon at prime meridian on the equator, what time is it at 75 degree north latitude on this meridian? </span>
                <div class="options-list">
                    <label><input type="radio" name="q1_2" value="A"> A. 12 noon</label>
                    <label><input type="radio" name="q1_2" value="B"> B. 3 pm</label>
                    <label><input type="radio" name="q1_2" value="C"> C. 5 pm</label>
                    <label><input type="radio" name="q1_2" value="D"> D. 7 am</label>
                    <label><input type="radio" name="q1_2" value="E"> E. Midnight</label>
                </div>
            </div>

            <div class="section-header">Test 2: Data Interpretation</div>
            
            <div class="question-card">
                <span class="question-text">Number of Employees in Civil Service between 1902 and 1937 </span>
                <table>
                    <tr><th>Year</th><th>Total</th><th>Competitive</th><th>Labour</th><th>Non-Comp</th></tr>
                    <tr><td>1902</td><td>34</td><td>20</td><td>12</td><td>2</td></tr>
                    <tr><td>1937</td><td>112</td><td>63</td><td>30</td><td>19</td></tr>
                </table>
                <span class="question-text">1.1. The percentage of employees in the non-competitive class has been constantly increasing since 1902. </span>
                <div class="options-list">
                    <label><input type="radio" name="q2_1_1" value="Correct"> A. Correct</label>
                    <label><input type="radio" name="q2_1_1" value="Incorrect"> B. Incorrect</label>
                </div>
            </div>

            <button type="submit" class="btn-submit">SUBMIT ALL TESTS</button>
        </form>
    </div>

    <script>
        let timeLeft = 45 * 60; 
        let tabSwitches = 0;
        const alertBox = document.getElementById('alert-popup');

        // Timer Logic
        const countdown = setInterval(() => {
            let mins = Math.floor(timeLeft / 60);
            let secs = timeLeft % 60;
            document.getElementById('timer').textContent = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            if (timeLeft <= 0) { clearInterval(countdown); autoSubmit(); }
            timeLeft--;
        }, 1000);

        // Anti-Cheat: Block Copy/Paste/Right-Click 
        ['copy', 'paste', 'cut', 'contextmenu', 'selectstart'].forEach(evt => {
            document.addEventListener(evt, e => {
                e.preventDefault();
                alertBox.style.display = 'block';
                setTimeout(() => alertBox.style.display = 'none', 2000);
            });
        });

        // Anti-Cheat: Tab Switching 
        document.addEventListener("visibilitychange", () => {
            if (document.hidden) {
                tabSwitches++;
                alert(`Warning: You left the test tab. Incidents: ${tabSwitches}`);
            }
        });

        // Fullscreen Enforcement 
        document.addEventListener('click', () => {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen().catch(()=>{});
        }, { once: true });

        // Submission
        document.getElementById('testForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            btn.disabled = true;
            btn.innerText = "Submitting...";

            const scriptURL = 'YOUR_GOOGLE_SCRIPT_URL_HERE'; 
            const formData = new FormData(e.target);
            formData.append('tab_switches', tabSwitches);

            try {
                await fetch(scriptURL, { method: 'POST', body: formData });
                alert("Success! Your test has been submitted.");
                window.location.reload();
            } catch (err) {
                alert("Submission failed. Check your script URL.");
                btn.disabled = false;
            }
        };

        function autoSubmit() {
            alert("Time up! Auto-submitting...");
            document.getElementById('testForm').requestSubmit();
        }
    </script>
</body>
</html>
